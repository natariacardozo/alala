---
layout: default
title: "Filtrar por Tag"
---

<h2 id="tag-title">Explorando o Acervo</h2>
<div id="tag-results">
  <ul class="lista-posts">
    {% for post in site.posts %}
      <li class="post-item" data-tags="{{ post.tags | join: ',' | downcase }}" style="display: none; margin-bottom: 20px;">
        <strong><a href="{{ post.url | relative_url }}">{{ post.title }}</a></strong>
        <p style="font-size: 0.9em;">{{ post.summary }}</p>
      </li>
    {% endfor %}
  </ul>
</div>

<script>
  // Lê a tag da URL (ex: tag.html?tag=chile)
  const urlParams = new URLSearchParams(window.location.search);
  const tag = urlParams.get('tag')?.toLowerCase().trim();
  const posts = document.querySelectorAll('.post-item');
  const titleEl = document.getElementById('tag-title');

  if (tag) {
    // Ajusta o título da página para o nome da tag
    titleEl.innerText = `Resultados para: ${tag.charAt(0).toUpperCase() + tag.slice(1)}`;
    
    posts.forEach(post => {
      // Pega as tags, transforma em minúsculas e remove espaços em branco de cada uma
      const rawTags = post.getAttribute('data-tags') || "";
      const postTags = rawTags.toLowerCase().split(',').map(t => t.trim());

      if (postTags.includes(tag)) {
        post.style.display = 'block';
      } else {
        post.style.display = 'none'; // Esconde o que não combina
      }
    });
  } else {
    // Se não houver tag na URL, mostra tudo
    titleEl.innerText = "Todas as Categorias";
    posts.forEach(post => post.style.display = 'block');
  }
</script>
